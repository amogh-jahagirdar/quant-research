{
    "name": "managedEnpointCustomDocker",
    "virtualClusterId": "#CLUSTER_ID#",
    "type": "JUPYTER_ENTERPRISE_GATEWAY",
    "releaseLabel": "emr-6.7.0-latest",
    "executionRoleArn": "#ROLE_ARN#",
    "configurationOverrides": {
        "applicationConfiguration": [
            {
                "classification": "spark-defaults",
                "properties": {
                    "spark.executor.memory": "14G",
                    "spark.driver.memory": "2G",
                    "spark.kubernetes.executor.request.cores": "3.5",
                    "spark.driver.cores": "1",
                    "spark.sql.catalogImplementation": "hive",
                    "spark.kubernetes.executor.podTemplateFile": "s3://clusteremr-emr-eks-assets-XXXX-us-east-1/clusteremr/pod-template/notebook-executor-custom.yaml",
                    "spark.executor.cores": "4",
                    "spark.dynamicAllocation.maxExecutors": "20",
                    "spark.dynamicAllocation.shuffleTracking.enabled": "true",
                    "spark.dynamicAllocation.shuffleTracking.timeout": "300s",
                    "spark.kubernetes.driver.request.cores": "0.5",
                    "spark.kubernetes.allocation.batch.size": "2",
                    "spark.hadoop.hive.metastore.client.factory.class": "com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory",
                    "spark.dynamicAllocation.minExecutors": "0",
                    "spark.kubernetes.driver.podTemplateFile": "s3://clusteremr-emr-eks-assets-XXXX-us-east-1/clusteremr/pod-template/notebook-driver-custom.yaml",
                    "spark.dynamicAllocation.enabled": "true",
                    "spark.dynamicAllocation.executorAllocationRatio": "1"
                }
            },
            {
                "classification": "jupyter-kernel-overrides",
                "configurations": [
                    {
                        "classification": "spark-python-kubernetes",
                        "properties": {
                            "container-image": "614393260192.dkr.ecr.us-east-1.amazonaws.com/me6.7_custom_arm64_repo:latest"
                        }
                    }
                ] 
            }
        ],
        "monitoringConfiguration": {
            "persistentAppUI": "ENABLED",
            "cloudWatchMonitoringConfiguration": {
                "logGroupName": "/aws/emr-containers/notebook",
                "logStreamNamePrefix": "default"
            }
        }
    }
}